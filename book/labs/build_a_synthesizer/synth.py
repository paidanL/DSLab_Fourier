"""
This is the driver code for a synthsizer.
"""
from machine import I2S, Pin

keys = {
    letter: Pin(i, Pin.IN, Pin.PULL_UP)
    for i, letter in zip(range(4, 16), "C C# D D# E F F# G G# A A# B".split())
}

silence = bytes(100)

tones = {
    "C": b"\x00\x00\xc8\x04\x89\t=\x0e\xdd\x12a\x17\xc4\x1b\x00 \r$\xe7'\x87+\xea.\t2\xe14l7\xa99\x93;(=e>I?\xd2?\x00@\xd2?I?e>(=\x93;\xa99l7\xe14\t2\xea.\x87+\xe7'\r$\xff\x1f\xc4\x1ba\x17\xdd\x12=\x0e\x89\t\xc8\x04\x00\x008\xfbw\xf6\xc3\xf1#\xed\x9f\xe8<\xe4\x00\xe0\xf3\xdb\x19\xd8y\xd4\x16\xd1\xf7\xcd\x1f\xcb\x94\xc8W\xc6m\xc4\xd8\xc2\x9b\xc1\xb7\xc0.\xc0\x00\xc0.\xc0\xb7\xc0\x9b\xc1\xd8\xc2m\xc4W\xc6\x94\xc8\x1f\xcb\xf7\xcd\x16\xd1y\xd4\x19\xd8\xf3\xdb\x01\xe0<\xe4\x9f\xe8#\xed\xc3\xf1w\xf68\xfb\x00\x00\xc8\x04\x89\t=\x0e\xdd\x12a\x17\xc4\x1b\x00 \r$\xe7'\x87+\xea.\t2\xe14l7\xa99\x93;(=e>I?\xd2?\x00@\xd2?I?e>(=\x93;\xa99l7\xe14\t2\xea.\x87+\xe7'\r$\xff\x1f\xc4\x1ba\x17\xdd\x12=\x0e\x89\t\xc8\x04\x00\x008\xfbw\xf6\xc3\xf1#\xed\x9f\xe8<\xe4\x00\xe0\xf3\xdb\x19\xd8y\xd4\x16\xd1\xf7\xcd\x1f\xcb\x94\xc8W\xc6m\xc4\xd8\xc2\x9b\xc1\xb7\xc0.\xc0\x00\xc0.\xc0\xb7\xc0\x9b\xc1\xd8\xc2m\xc4W\xc6\x94\xc8\x1f\xcb\xf7\xcd\x16\xd1y\xd4\x19\xd8\xf3\xdb\x01\xe0<\xe4\x9f\xe8#\xed\xc3\xf1w\xf68\xfb\x00\x00\xc8\x04\x89\t=\x0e\xdd\x12a\x17\xc4\x1b\x00 \r$\xe7'\x87+\xea.\t2\xe14l7\xa99\x93;(=e>I?\xd2?\x00@\xd2?I?e>(=\x93;\xa99l7\xe14\t2\xea.\x87+\xe7'\r$\x00 \xc4\x1ba\x17\xdd\x12=\x0e\x89\t\xc8\x04\x00\x008\xfbw\xf6\xc3\xf1#\xed\x9f\xe8<\xe4\x01\xe0\xf3\xdb\x19\xd8y\xd4\x16\xd1\xf7\xcd\x1f\xcb\x94\xc8W\xc6m\xc4\xd8\xc2\x9b\xc1\xb7\xc0.\xc0\x00\xc0.\xc0\xb7\xc0\x9b\xc1\xd8\xc2m\xc4W\xc6\x94\xc8\x1f\xcb\xf7\xcd\x16\xd1y\xd4\x19\xd8\xf3\xdb\x00\xe0<\xe4\x9f\xe8#\xed\xc3\xf1w\xf68\xfb",
    "C#": b'\x00\x00\x15\x05#\n \x0f\x04\x14\xc9\x18e\x1d\xd1!\x07&\xff)\xb3-\x1e184\xff6l9|;,=y>a?\xe2?\xfc?\xaf?\xfa>\xdf=`<\x80:A8\xa65\xb52r/\xe2+\x0b(\xf3#\xa1\x1f\x1c\x1bk\x16\x96\x11\xa4\x0c\x9d\x07\x8b\x02u\xfdc\xf8\\\xf3j\xee\x95\xe9\xe4\xe4_\xe0\r\xdc\xf5\xd7\x1e\xd4\x8e\xd0K\xcdZ\xca\xbf\xc7\x80\xc5\xa0\xc3!\xc2\x06\xc1Q\xc0\x04\xc0\x1e\xc0\x9f\xc0\x87\xc1\xd4\xc2\x84\xc4\x94\xc6\x01\xc9\xc8\xcb\xe2\xceM\xd2\x01\xd6\xf9\xd9/\xde\x9b\xe27\xe7\xfc\xeb\xe0\xf0\xdd\xf5\xeb\xfa\x00\x00\x15\x05#\n \x0f\x04\x14\xc9\x18e\x1d\xd1!\x07&\xff)\xb3-\x1e184\xff6l9|;,=y>a?\xe2?\xfc?\xaf?\xfa>\xdf=`<\x80:A8\xa65\xb52r/\xe2+\x0b(\xf3#\xa1\x1f\x1c\x1bk\x16\x96\x11\xa4\x0c\x9d\x07\x8b\x02u\xfdc\xf8\\\xf3j\xee\x95\xe9\xe4\xe4_\xe0\r\xdc\xf5\xd7\x1e\xd4\x8e\xd0K\xcdZ\xca\xbf\xc7\x80\xc5\xa0\xc3!\xc2\x06\xc1Q\xc0\x04\xc0\x1e\xc0\x9f\xc0\x87\xc1\xd4\xc2\x84\xc4\x94\xc6\x01\xc9\xc8\xcb\xe2\xceM\xd2\x01\xd6\xf9\xd9/\xde\x9b\xe27\xe7\xfc\xeb\xe0\xf0\xdd\xf5\xeb\xfa',
    "D": b'\x00\x00Z\x05\xac\n\xea\x0f\x0c\x15\x07\x1a\xd5\x1ej#\xc0\'\xcf+\x8f/\xfa2\t6\xb78\xff:\xde<O>P?\xdf?\xfc?\xa6?\xdd>\xa4=\xfc;\xe89l7\x8d4P1\xb9-\xd1)\x9e%\'!t\x1c\x8f\x17\x7f\x12N\r\x05\x08\xae\x02R\xfd\xfb\xf7\xb2\xf2\x81\xedq\xe8\x8c\xe3\xd9\xdeb\xda/\xd6G\xd2\xb0\xces\xcb\x94\xc8\x18\xc6\x04\xc4\\\xc2#\xc1Z\xc0\x04\xc0!\xc0\xb0\xc0\xb1\xc1"\xc3\x01\xc5I\xc7\xf7\xc9\x06\xcdq\xd01\xd4@\xd8\x96\xdc+\xe1\xf9\xe5\xf4\xea\x16\xf0T\xf5\xa6\xfa',
    "D#": b'\x00\x00\xa8\x05D\x0b\xca\x10/\x16g\x1bh (%\x9e)\xc0-\x871\xea4\xe47m:\x82<\x1d>;?\xdb?\xfb?\x9b?\xbc>_=\x86;79u6E3\xaf/\xba+m\'\xd1"\xef\x1d\xd1\x18\x81\x13\x0b\x0ex\x08\xd4\x02,\xfd\x88\xf7\xf5\xf1\x7f\xec/\xe7\x11\xe2/\xdd\x93\xd8F\xd4Q\xd0\xbb\xcc\x8b\xc9\xc9\xc6z\xc4\xa1\xc2D\xc1e\xc0\x05\xc0%\xc0\xc5\xc0\xe3\xc1~\xc3\x93\xc5\x1c\xc8\x16\xcby\xce@\xd2b\xd6\xd8\xda\x98\xdf\x99\xe4\xd1\xe96\xef\xbc\xf4X\xfa',
    "E": b'\x00\x00\xfe\x05\xee\x0b\xc4\x11r\x17\xeb\x1c$"\x0f\'\xa2+\xd3/\x993\xeb6\xc19\x15<\xe2=#?\xd7?\xfb?\x8f?\x94>\x0c=\xfb:f8Q5\xc41\xc8-d)\xa3$\x90\x1f6\x1a\xa1\x14\xde\x0e\xf9\x08\xff\x02\x01\xfd\x07\xf7"\xf1_\xeb\xca\xe5p\xe0]\xdb\x9c\xd68\xd2<\xce\xaf\xca\x9a\xc7\x05\xc5\xf4\xc2l\xc1q\xc0\x05\xc0)\xc0\xdd\xc0\x1e\xc2\xeb\xc3?\xc6\x15\xc9g\xcc-\xd0^\xd4\xf1\xd8\xdc\xdd\x15\xe3\x8e\xe8<\xee\x12\xf4\x02\xfa',
    "F": b"\x00\x00_\x06\xae\x0c\xdd\x12\xdc\x18\x9b\x1e\r$#)\xd0-\t2\xc25\xf38\x93;\x9b=\x07?\xd2?\xfa?\x80?e>\xaa<V:l7\xf63\xfc/\x87+\xa4&_!\xc4\x1b\xe3\x15\xca\x0f\x89\t0\x03\xd0\xfcw\xf66\xf0\x1d\xea<\xe4\xa1\xde\\\xd9y\xd4\x04\xd0\n\xcc\x94\xc8\xaa\xc5V\xc3\x9b\xc1\x80\xc0\x06\xc0.\xc0\xf9\xc0e\xc2m\xc4\r\xc7>\xca\xf7\xcd0\xd2\xdd\xd6\xf3\xdbe\xe1$\xe7#\xedR\xf3\xa1\xf9",
    "F#": b'\x00\x00\xcd\x06\x87\r\x19\x14r\x1a} *&i+*0_4\xfc7\xf6:F=\xe4>\xcb?\xfa?o?+>4<\x8e9A6V2\xda-\xd8(a#\x82\x1dN\x17\xd6\x10.\ng\x03\x99\xfc\xd2\xf5*\xef\xb2\xe8~\xe2\x9f\xdc(\xd7&\xd2\xaa\xcd\xbf\xc9r\xc6\xcc\xc3\xd5\xc1\x91\xc0\x06\xc05\xc0\x1c\xc1\xba\xc2\n\xc5\x04\xc8\xa1\xcb\xd6\xcf\x97\xd4\xd6\xd9\x83\xdf\x8e\xe5\xe7\xeby\xf23\xf9\x00\x00\xcd\x06\x87\r\x19\x14r\x1a} *&i+*0_4\xfc7\xf6:F=\xe4>\xcb?\xfa?o?+>4<\x8e9A6V2\xda-\xd8(a#\x82\x1dN\x17\xd6\x10.\ng\x03\x99\xfc\xd2\xf5*\xef\xb2\xe8~\xe2\x9f\xdc(\xd7&\xd2\xaa\xcd\xbf\xc9r\xc6\xcc\xc3\xd5\xc1\x91\xc0\x06\xc05\xc0\x1c\xc1\xba\xc2\n\xc5\x04\xc8\xa1\xcb\xd6\xcf\x97\xd4\xd6\xd9\x83\xdf\x8e\xe5\xe7\xeby\xf23\xf9\x00\x00\xcd\x06\x87\r\x19\x14r\x1a} *&i+*0_4\xfc7\xf6:F=\xe4>\xcb?\xfa?o?+>4<\x8e9A6V2\xda-\xd8(a#\x82\x1dN\x17\xd6\x10.\ng\x03\x99\xfc\xd2\xf5*\xef\xb2\xe8~\xe2\x9f\xdc(\xd7&\xd2\xaa\xcd\xbf\xc9r\xc6\xcc\xc3\xd5\xc1\x91\xc0\x06\xc05\xc0\x1c\xc1\xba\xc2\n\xc5\x04\xc8\xa1\xcb\xd6\xcf\x97\xd4\xd6\xd9\x83\xdf\x8e\xe5\xe7\xeby\xf23\xf9',
    "G": b'\x00\x00*\x07=\x0e#\x15\xc4\x1b\x0c"\xe7\'A-\t206\xa99h<e>\x98?\x00@\x98?e>h<\xa9906\t2A-\xe7\'\x0c"\xc4\x1b#\x15=\x0e*\x07\x00\x00\xd6\xf8\xc3\xf1\xdd\xea<\xe4\xf4\xdd\x19\xd8\xbf\xd2\xf7\xcd\xd0\xc9W\xc6\x98\xc3\x9b\xc1h\xc0\x00\xc0h\xc0\x9b\xc1\x98\xc3W\xc6\xd0\xc9\xf7\xcd\xbf\xd2\x19\xd8\xf4\xdd<\xe4\xdd\xea\xc3\xf1\xd6\xf8\x00\x00*\x07=\x0e#\x15\xc4\x1b\x0c"\xe7\'A-\t206\xa99h<e>\x98?\x00@\x98?e>h<\xa9906\t2A-\xe7\'\x0c"\xc4\x1b#\x15=\x0e*\x07\x00\x00\xd6\xf8\xc3\xf1\xdd\xea<\xe4\xf4\xdd\x19\xd8\xbf\xd2\xf7\xcd\xd0\xc9W\xc6\x98\xc3\x9b\xc1h\xc0\x00\xc0h\xc0\x9b\xc1\x98\xc3W\xc6\xd0\xc9\xf7\xcd\xbf\xd2\x19\xd8\xf4\xdd<\xe4\xdd\xea\xc3\xf1\xd6\xf8\x00\x00*\x07=\x0e#\x15\xc4\x1b\x0c"\xe7\'A-\t206\xa99h<e>\x98?\x00@\x98?e>h<\xa9906\t2A-\xe7\'\x0c"\xc4\x1b#\x15=\x0e*\x07\x00\x00\xd6\xf8\xc3\xf1\xdd\xea<\xe4\xf4\xdd\x19\xd8\xbf\xd2\xf7\xcd\xd0\xc9W\xc6\x98\xc3\x9b\xc1h\xc0\x00\xc0h\xc0\x9b\xc1\x98\xc3W\xc6\xd0\xc9\xf7\xcd\xbf\xd2\x19\xd8\xf4\xdd<\xe4\xdd\xea\xc3\xf1\xd6\xf8\x00\x00*\x07=\x0e#\x15\xc4\x1b\x0c"\xe7\'A-\t206\xa99h<e>\x98?\x00@\x98?e>h<\xa9906\t2A-\xe7\'\x0c"\xc4\x1b#\x15=\x0e*\x07\x00\x00\xd6\xf8\xc3\xf1\xdd\xea<\xe4\xf4\xdd\x19\xd8\xbf\xd2\xf7\xcd\xd0\xc9W\xc6\x98\xc3\x9b\xc1h\xc0\x00\xc0h\xc0\x9b\xc1\x98\xc3W\xc6\xd0\xc9\xf7\xcd\xbf\xd2\x19\xd8\xf4\xdd<\xe4\xdd\xea\xc3\xf1\xd6\xf8',
    "G#": b'\x00\x00\x91\x07\x08\x0fH\x169\x1d\xc0#\xc7)8/\xff3\x0c8N;\xbc=L?\xf8?\xbf?\xa0>\xa0<\xc79\x1e6\xb21\x94,\xd5&\x8b \xcc\x19\xb1\x12R\x0b\xca\x036\xfc\xae\xf4O\xed4\xe6u\xdf+\xd9l\xd3N\xce\xe2\xc99\xc6`\xc3`\xc1A\xc0\x08\xc0\xb4\xc0D\xc2\xb2\xc4\xf4\xc7\x01\xcc\xc8\xd09\xd6@\xdc\xc7\xe2\xb8\xe9\xf8\xf0o\xf8',
    "A": b'\x00\x00\x05\x08\xea\x0f\x8f\x17\xd5\x1e\x9e%\xcf+P1\t6\xe89\xde<\xdd>\xdf?\xdf?\xdd>\xde<\xe89\t6P1\xcf+\x9e%\xd5\x1e\x8f\x17\xea\x0f\x05\x08\x00\x00\xfb\xf7\x16\xf0q\xe8+\xe1b\xda1\xd4\xb0\xce\xf7\xc9\x18\xc6"\xc3#\xc1!\xc0!\xc0#\xc1"\xc3\x18\xc6\xf7\xc9\xb0\xce1\xd4b\xda+\xe1q\xe8\x16\xf0\xfb\xf7',
    "A#": b"\x00\x00\x87\x08\xe8\x10\xfc\x18\x9d \xa9'\x01.\x863\x1f8\xb9;A>\xad?\xf6?\x1b? =\r:\xf15\xdf0\xee*8$\xdd\x1c\xfe\x14\xbf\x0cF\x04\xba\xfbA\xf3\x02\xeb#\xe3\xc8\xdb\x12\xd5!\xcf\x0f\xca\xf3\xc5\xe0\xc2\xe5\xc0\n\xc0S\xc0\xbf\xc1G\xc4\xe1\xc7z\xcc\xff\xd1W\xd8c\xdf\x04\xe7\x18\xefy\xf7\x00\x00\x87\x08\xe8\x10\xfc\x18\x9d \xa9'\x01.\x863\x1f8\xb9;A>\xad?\xf6?\x1b? =\r:\xf15\xdf0\xee*8$\xdd\x1c\xfe\x14\xbf\x0cF\x04\xba\xfbA\xf3\x02\xeb#\xe3\xc8\xdb\x12\xd5!\xcf\x0f\xca\xf3\xc5\xe0\xc2\xe5\xc0\n\xc0S\xc0\xbf\xc1G\xc4\xe1\xc7z\xcc\xff\xd1W\xd8c\xdf\x04\xe7\x18\xefy\xf7\x00\x00\x87\x08\xe8\x10\xfc\x18\x9d \xa9'\x01.\x863\x1f8\xb9;A>\xad?\xf6?\x1b? =\r:\xf15\xdf0\xee*8$\xdd\x1c\xfe\x14\xbf\x0cF\x04\xba\xfbA\xf3\x02\xeb#\xe3\xc8\xdb\x12\xd5!\xcf\x0f\xca\xf3\xc5\xe0\xc2\xe5\xc0\n\xc0S\xc0\xbf\xc1G\xc4\xe1\xc7z\xcc\xff\xd1W\xd8c\xdf\x04\xe7\x18\xefy\xf7",
    "B": b'\x00\x00\xf9\x08\xc4\x116\x1a$"d)\xd3/Q5\xc19\x0c=#?\xfb?\x8f?\xe2=\xfb:\xeb6\xc41\xa2+\xa3$\xeb\x1c\xa1\x14\xee\x0b\xff\x02\x02\xfa"\xf1\x8e\xe8p\xe0\xf1\xd88\xd2g\xcc\x9a\xc7\xeb\xc3l\xc1)\xc0)\xc0l\xc1\xeb\xc3\x9a\xc7g\xcc8\xd2\xf1\xd8p\xe0\x8e\xe8"\xf1\x02\xfa\xff\x02\xee\x0b\xa1\x14\xeb\x1c\xa3$\xa2+\xc41\xeb6\xfb:\xe2=\x8f?\xfb?#?\x0c=\xc19Q5\xd3/d)$"6\x1a\xc4\x11\xf9\x08\x00\x00\x07\xf7<\xee\xca\xe5\xdc\xdd\x9c\xd6-\xd0\xaf\xca?\xc6\xf4\xc2\xdd\xc0\x05\xc0q\xc0\x1e\xc2\x05\xc5\x15\xc9<\xce^\xd4]\xdb\x15\xe3_\xeb\x12\xf4\x01\xfd\xfe\x05\xde\x0er\x17\x90\x1f\x0f\'\xc8-\x993f8\x15<\x94>\xd7?\xd7?\x94>\x15<f8\x993\xc8-\x0f\'\x90\x1fr\x17\xde\x0e\xfe\x05\x01\xfd\x12\xf4_\xeb\x15\xe3]\xdb^\xd4<\xce\x15\xc9\x05\xc5\x1e\xc2q\xc0\x05\xc0\xdd\xc0\xf4\xc2?\xc6\xaf\xca-\xd0\x9c\xd6\xdc\xdd\xca\xe5<\xee\x07\xf7',
}

try:
    audio_out = I2S(
        0,
        sck=Pin(16),
        ws=Pin(17),
        sd=Pin(18),
        mode=I2S.TX,
        bits=16,
        format=I2S.MONO,
        rate=22_050,
        ibuf=2000,
    )

    while True:
        for letter, pin in keys.items():
            if not pin.value():
                audio_out.write(tones[letter])
                break
        else:
            audio_out.write(silence)

finally:
    audio_out.deinit()
